# NIFTY 3-Min ORB Options Strategy Configuration

market:
  symbol: "NIFTY 50"
  exchange: "NSE"
  options_exchange: "NFO"
  lot_size: 25
  strike_step: 50         # NIFTY strikes are in multiples of 50
  itm_offset: 200         # How deep ITM (points from rounded spot)

session:
  market_open: "09:15"
  market_close: "15:30"
  orb_candles: 3           # Number of 1-min candles for opening range
  orb_end: "09:18"         # 09:15 + 3 minutes
  no_new_entry_after: "11:30"
  force_exit_time: "15:15"

strategy:
  max_positions: 1          # One position at a time (conservative)
  max_re_entries_per_side: 1
  candle_interval: "minute" # 1-minute candles

  # RSI filter (disabled — sweep showed RSI off performs best)
  rsi_period: 14
  rsi_entry_min: 0
  rsi_entry_max: 100

  # SuperTrend filter (ST 14,3.0 — best from parameter sweep)
  supertrend_period: 14
  supertrend_multiplier: 3.0

  # Indicator warmup
  warmup_candles: 30        # Prior day candles for indicator warmup

  # Premium trailing ladder (wider 40-step — best from parameter sweep)
  trailing_ladder:
    - trigger: 40
      trail_to: 0           # Cost (breakeven)
    - trigger: 80
      trail_to: 40
    - trigger: 120
      trail_to: 80
    - trigger: 160
      trail_to: 120
    - trigger: 200
      trail_to: -1          # -1 = full exit

backtest:
  slippage_points: 2.0      # Per leg slippage in option premium
  brokerage_per_order: 20.0
  stt_rate: 0.001            # 0.1% on sell side (options)
  gst_rate: 0.18            # 18% on brokerage
  sebi_charges: 0.000001    # Per turnover
  stamp_duty: 0.00003       # On buy side
  exchange_txn_charge: 0.0003503  # NSE options (0.03503%)

reporting:
  risk_free_rate: 0.065     # For Sharpe ratio (6.5% Indian T-bill)
  output_dir: "output"

live:
  paper_mode: true              # Start in paper mode by default
  lots: 1                       # Number of lots to trade
  max_daily_loss: 3000          # Kill switch: stop if net loss exceeds this
  order_timeout_seconds: 10     # Cancel unfilled orders after this
  telegram_bot_token: ""        # Override via TELEGRAM_BOT_TOKEN env var
  telegram_chat_id: ""          # Override via TELEGRAM_CHAT_ID env var
  state_file: "data/live_state.json"
  log_file: "output/live_log.csv"
